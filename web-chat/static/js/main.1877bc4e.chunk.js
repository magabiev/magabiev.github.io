(this["webpackJsonpweb-chat"]=this["webpackJsonpweb-chat"]||[]).push([[0],{34:function(e,a,t){e.exports=t(50)},39:function(e,a,t){},50:function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),r=t(11),l=t.n(r),s=(t(39),t(2));function i(e){return{type:"searchRequest/contacts/start",payload:e}}var o=function(){var e=Object(s.b)(),a=Object(s.c)((function(e){return e.application.contactSearchValue}));return c.a.createElement("div",{className:"search_contact"},c.a.createElement("i",{className:"material-icons"},"search"),c.a.createElement("input",{placeholder:"Search Contact",value:a,onChange:function(a){e(i(a.target.value))}}),0!==a.length&&c.a.createElement("i",{onClick:function(){e(i(""))},className:"material-icons click"},"clear"))},m=t(10),d=t.n(m);function u(e){var a=e.size,t=e.name,n=e.online,r=d()("avatar",{small:"small"===a},{medium:"medium"===a},{large:"large"===a});return c.a.createElement("div",{className:r},n&&c.a.createElement("div",{className:"online"}),c.a.createElement("div",{className:"m-auto"},t[0]))}u.defaultProps={name:"Name",size:"medium"};var p=u,f=t(1),v=function(){var e=document.getElementById("chat-window");e.scrollTop=e.scrollHeight};function E(e){return{type:"searchRequest/messages/start",payload:e}}function b(e){return{type:"input/content/start",payload:e}}var g=function(e){var a=e.read;return c.a.createElement("span",{className:"read"},a?c.a.createElement("i",{className:"material-icons"},"done_all"):c.a.createElement("i",{className:"material-icons"},"done"))},h=t(15),O=t.n(h);var N=function(e){var a=e.children,t=e.type,n=d()("dropdown_menu",{dropdown_contact:"contact"===t},{dropdown_message:"message"===t});return c.a.createElement("div",{className:n},a)};var j=function(e){var a=e.action,t=e.children;return c.a.createElement("div",{onClick:a,className:"dropdown_item click"},t)};var y=function(e){var a,t,n,r=e.contact,l=Object(s.b)(),i=Object(s.c)((function(e){return e.application.myId})),o=Object(s.c)((function(e){return e.profile.profile})),m=d()("contact",{active_contact:o._id===r._id});return c.a.createElement("div",{className:m,onClick:function(){r._id!==o._id&&l(function(e,a){return function(t){t({type:"load/chat/started"}),fetch("http://151.248.117.7:8001/api/messages/".concat(e,"/").concat(a)).then((function(e){return e.json()})).then((function(e){t({type:"load/chat/succeed",payload:e}),v()}))}}(i,r._id)),l({type:"get/item/succeed",payload:r})}},c.a.createElement(p,{size:"medium",name:r.fullname,online:r.online}),c.a.createElement("div",{className:"info"},c.a.createElement("div",{className:"name"},r.fullname),c.a.createElement("div",{className:"last_message"},r._id===(null===(a=r.lastMessage)||void 0===a?void 0:a.toUserId)&&c.a.createElement(g,{read:r.lastMessage.read}),null===(t=r.lastMessage)||void 0===t?void 0:t.content)),c.a.createElement("div",{className:"options"},c.a.createElement("span",{className:"date_contact"},O()(null===(n=r.lastMessage)||void 0===n?void 0:n.time).format("hh:mm")),c.a.createElement("span",{className:"option"},c.a.createElement("i",{className:"material-icons"},"more_horiz"))))},_=t(20),k=t.n(_);function w(){return c.a.createElement("div",{className:"contact_skeleton"},c.a.createElement("div",{className:"avatar_skeleton"},c.a.createElement(k.a,{height:100,width:100})),c.a.createElement("div",{className:"info_skeleton"},c.a.createElement(k.a,{count:2})))}var I=function(){return new Array(9).fill(1).map((function(e,a){return c.a.createElement(w,{key:a})}))};var C=function(){var e=Object(s.b)();Object(n.useEffect)((function(){e((function(e){e({type:"load/sidebar/started"}),fetch("http://151.248.117.7:8001/api/contacts").then((function(e){return e.json()})).then((function(a){return e({type:"load/sidebar/succeed",payload:a})}))}))}),[e]);var a=Object(s.c)((function(e){return e.contacts.items.filter((function(a){var t=e.application.contactSearchValue;return-1!==a.fullname.toUpperCase().indexOf(t.toUpperCase())}))})),t=Object(s.c)((function(e){return e.contacts.loading}));return c.a.createElement("div",{className:"sidebar"},c.a.createElement("div",{className:"contacts_block"},c.a.createElement("div",{className:"search_parent"},c.a.createElement(o,null)),t?c.a.createElement(I,null):a.map((function(e){return c.a.createElement(y,{key:e._id,contact:e})}))))},q=t(31),S=t(52);var V=function(e){var a=e.animation,t=e.send,n=e.clear,r=e.iconButton;return c.a.createElement("button",{className:"send click"},r?c.a.createElement(S.a,{in:0!==a.length,timeout:500,classNames:"sendIcon"},c.a.createElement("i",{className:"material-icons",onClick:function(){n(),t()}},"send")):c.a.createElement(S.a,{in:0!==a.length,timeout:500,classNames:"mic"},c.a.createElement("i",{className:"material-icons"},"mic")))};var U=function(){return c.a.createElement("button",{className:"send click"},c.a.createElement("i",{className:"material-icons"},"attach_file"))};var x=function(){var e=Object(s.b)(),a=Object(s.c)((function(e){return e.application.myId})),t=Object(s.c)((function(e){return e.profile.profile})),n=Object(s.c)((function(e){return e.chat.content}));return c.a.createElement("div",{className:"form_block"},c.a.createElement(q.a,{onChange:function(a){e(b(a.target.value))},value:n,className:"send_form",placeholder:"Write a message...",maxRows:"5"}),c.a.createElement(U,null),c.a.createElement(V,{animation:n,clear:function(){e(b(""))},send:function(){e(function(e,a,t){return function(n,c){var r=c().chat.requestId;n({type:"send/message/started",payload:{myId:e,requestId:r,content:t,toUserId:a,type:"text"}}),fetch("http://151.248.117.7:8001/api/messages",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({myId:e,contactId:a,type:"text",content:t})}).then((function(e){return e.json()})).then((function(e){n({type:"send/message/succeed",payload:Object(f.a)({requestId:r},e)}),v()}))}}(a,t._id,n))},iconButton:0!==n.length}))};var M=function(){var e=Object(s.b)(),a=Object(s.c)((function(e){return e.application.searchValue})),t=Object(s.c)((function(e){return e.application.searchOpen}));return c.a.createElement("div",{className:t?"search_message":"search_message_close"},c.a.createElement("div",{className:"icon click",onClick:function(){e({type:"open/search/toggle"})}},c.a.createElement("i",{className:"material-icons"},"search")),c.a.createElement("input",{value:a,onChange:function(a){e(E(a.target.value))}}),0!==a.length&&c.a.createElement("i",{onClick:function(){e(E(""))},className:"material-icons click"},"clear"))},z=t(32);var T=function(){return c.a.createElement("span",{className:"updating"},"Updating",c.a.createElement("i",{className:"material-icons loading_chat"},"autorenew"),"...")};var R=function(e){var a=e.name,t=e.online;return c.a.createElement("div",{className:"header_name"},a,t&&c.a.createElement("div",{className:"online"}))};var B=function(e){var a=e.loading,t=Object(s.b)(),n=function(){t({type:"open/profile/toggle"})};Object(z.a)("shift+p",(function(){return n()}));var r=Object(s.c)((function(e){return e.profile.profile}));return c.a.createElement("div",{className:"header_parent"},c.a.createElement("div",{className:"header_search"},c.a.createElement(M,null)),a?c.a.createElement(T,null):c.a.createElement(R,{name:r.fullname,online:r.online}),c.a.createElement("div",{className:"profile_open"},c.a.createElement("i",{className:"material-icons click",onClick:n},"person")))},F=t(9),J=t.n(F);var P=function(e){var a=e.messageId,t=Object(s.b)(),n=Object(s.c)((function(e){return e.application.dropdownOpen})),r=Object(s.c)((function(e){return e.application.messageTempId})),l=d()("dropdown_icon_close",{dropdown_icon:n&&r===a});return c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:l,onClick:function(){t({type:"open/dropdown/toggle"})}},c.a.createElement("i",{className:"material-icons"},"keyboard_arrow_down")),n&&r===a&&c.a.createElement(N,{type:"message"},c.a.createElement(j,null,"Delete")))};function A(e){var a=e.message,t=Object(s.b)(),n=Object(s.c)((function(e){return e.application.myId})),r=Object(s.c)((function(e){return e.profile.profile})),l=n===a.toUserId,i=d()("margin",{message_block:l},{my_message_block:!l});return c.a.createElement("div",{className:i,onClick:function(){t({type:"get/messageId/started",payload:a._id})}},l&&c.a.createElement(p,{size:"small",name:r.fullname}),c.a.createElement("div",{className:"message"},a.content,c.a.createElement("div",{className:"date"},c.a.createElement("div",null,O()(a.time).format("hh:mm")),a.sending?c.a.createElement("span",{className:"timer"},c.a.createElement("i",{className:"material-icons "},"timer")):!l&&c.a.createElement(g,{read:a.read})),c.a.createElement(P,{messageId:a._id})))}A.prototype={message:J.a.object};var D=A;var H=function(e){var a=e.content;return c.a.createElement("div",{className:"type_info"},a)};var L=function(e){var a=e.message;return"text"===a.type?c.a.createElement(D,{message:a}):c.a.createElement(H,{content:a.content})};var W=function(){var e=Object(s.c)((function(e){return e.chat.items.filter((function(a){return-1!==a.content.toUpperCase().indexOf(e.application.searchValue.toUpperCase())}))})),a=Object(s.c)((function(e){return e.chat.loading}));return c.a.createElement("div",{className:"chat_parent"},c.a.createElement(B,{loading:a}),c.a.createElement("div",{className:"chat_block",id:"chat-window"},!a&&e.map((function(e){return c.a.createElement(L,{key:e._id,message:e})}))),c.a.createElement("div",{className:"parent_form"},c.a.createElement(x,null)))};var G=function(e){var a=e.socials;return c.a.createElement("div",{className:"profile_social"},c.a.createElement("span",{className:"header_profile"},"Social"),c.a.createElement("div",{className:"social_block"},a.instagram&&c.a.createElement("div",{className:"icons_social click"},c.a.createElement("i",{className:"fab fa-instagram"})," ",a.instagram),a.twitter&&c.a.createElement("div",{className:"icons_social click"},c.a.createElement("i",{className:"fab fa-twitter"})," ",a.twitter),a.facebook&&c.a.createElement("div",{className:"icons_social click"},c.a.createElement("i",{className:"fab fa-facebook-square"})," ",a.facebook)))};var K=function(e){var a=e.fileName;return c.a.createElement("div",{className:"profile_media"},c.a.createElement("span",{className:"header_profile"},"Media"),c.a.createElement("div",{className:"mediafiles"},c.a.createElement("div",{className:"file click"},c.a.createElement("div",{className:"media_img"}),c.a.createElement("div",{className:"media_info"},a))))};var Q=function(){return c.a.createElement("div",{className:"communication"},c.a.createElement("div",{className:"icons click"},c.a.createElement("div",{className:"m-auto"},c.a.createElement("i",{className:"material-icons"},"call"))),c.a.createElement("div",{className:"icons click"},c.a.createElement("div",{className:"m-auto"},c.a.createElement("i",{className:"material-icons"},"videocam"))),c.a.createElement("div",{className:"icons click"},c.a.createElement("div",{className:"m-auto"},c.a.createElement("i",{className:"material-icons"},"mail"))))};var X=function(){var e=Object(s.c)((function(e){return e.profile.open})),a=Object(s.c)((function(e){return e.profile.profile})),t=Object(s.c)((function(e){return e.chat.loading}));return c.a.createElement("div",{className:e?"profile_parent_open":"profile_parent"},c.a.createElement("div",{className:"profile_info"},!t&&c.a.createElement(c.a.Fragment,null,c.a.createElement(p,{size:"large",name:a.fullname}),c.a.createElement("div",{className:"profile_name"},a.fullname),c.a.createElement("div",{className:"nickname"},"@",a.username)),c.a.createElement(Q,null)),!t&&a.socials&&c.a.createElement(G,{socials:a.socials}),c.a.createElement(K,{fileName:"filename.pdf"}))},Y=t(28),Z=t(4);var $=function(e){return c.a.createElement("div",{className:"preloader"},c.a.createElement("div",null,"Please, select a chat to start messaging"))};var ee=function(){var e=Object(s.b)(),a=Object(s.c)((function(e){return e.chat.open}));return Object(n.useEffect)((function(){e((function(e){e({type:"load/myId/started"}),fetch("http://151.248.117.7:8001/api/profile").then((function(e){return e.json()})).then((function(a){return e({type:"load/myId/succeed",payload:a._id})}))}))}),[e]),c.a.createElement(Y.a,null,c.a.createElement(Z.c,null,c.a.createElement(Z.a,{path:"/"},c.a.createElement(C,null),a?c.a.createElement(c.a.Fragment,null,c.a.createElement(W,null)," ",c.a.createElement(X,null)):c.a.createElement($,null))))},ae=(t(47),t(48),t(49),t(29)),te=t(12),ne=t(16),ce={items:[],loading:!0,open:!1,content:"",requestId:1,deleting:!1};var re={profile:[],open:!1};var le={items:[],contactSearchValue:"",loading:!0};var se=t(30),ie={myId:"",loading:!0,dropdownOpen:!1,dropdownMessageOpen:!1,messageTempId:"",searchOpen:!1,searchValue:"",contactSearchValue:""};var oe=Object(ae.createLogger)({collapsed:!0,diff:!0}),me=Object(te.c)({chat:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ce,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"load/chat/started":return Object(f.a)(Object(f.a)({},e),{},{open:!0,loading:!0});case"load/chat/succeed":return Object(f.a)(Object(f.a)({},e),{},{items:a.payload,loading:!1});case"input/content/start":return Object(f.a)(Object(f.a)({},e),{},{content:a.payload});case"send/message/started":var t=Object(f.a)(Object(f.a)({},a.payload),{},{sending:!0});return Object(f.a)(Object(f.a)({},e),{},{requestId:e.requestId+1,items:[].concat(Object(ne.a)(e.items),[t])});case"send/message/succeed":return Object(f.a)(Object(f.a)({},e),{},{items:e.items.map((function(e){return e.requestId===a.payload.requestId?Object(f.a)(Object(f.a)({},e),{},{sending:!1,_id:a.payload._id}):e}))});case"delete/message/started":return Object(f.a)(Object(f.a)({},e),{},{deleting:!0});case"delete/message/succeed":return Object(f.a)(Object(f.a)({},e),{},{items:a.payload,deleting:!1});default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:re,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"get/item/succeed":return Object(f.a)(Object(f.a)({},e),{},{profile:a.payload});case"open/profile/toggle":return Object(f.a)(Object(f.a)({},e),{},{open:!e.open});default:return e}},contacts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:le,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"load/sidebar/started":return Object(f.a)(Object(f.a)({},e),{},{loading:!0});case"load/sidebar/succeed":return Object(f.a)(Object(f.a)({},e),{},{items:a.payload,loading:!1});default:return e}},application:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ie,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"load/myId/started":return Object(f.a)(Object(f.a)({},e),{},{loading:!0});case"load/myId/succeed":return Object(f.a)(Object(f.a)({},e),{},{myId:a.payload,loading:!1});case"open/search/toggle":return Object(f.a)(Object(f.a)({},e),{},{searchOpen:!e.searchOpen});case"searchRequest/messages/start":return Object(f.a)(Object(f.a)({},e),{},{searchValue:a.payload});case"searchRequest/contacts/start":return Object(f.a)(Object(f.a)({},e),{},{contactSearchValue:a.payload});case"open/dropdown/toggle":return Object(f.a)(Object(f.a)({},e),{},{dropdownOpen:!e.dropdownOpen});case"get/messageId/started":return Object(f.a)(Object(f.a)({},e),{},{messageTempId:a.payload});case"close/dropdown/started":return Object(f.a)(Object(f.a)({},e),{},{dropdownOpen:!1});default:return e}}}),de=Object(te.d)(me,Object(te.a)(se.a,oe));l.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(s.a,{store:de},c.a.createElement("div",{className:"container"},c.a.createElement(ee,null)))),document.getElementById("root"))}},[[34,1,2]]]);
//# sourceMappingURL=main.1877bc4e.chunk.js.map