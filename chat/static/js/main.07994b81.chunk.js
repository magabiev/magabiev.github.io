(this["webpackJsonpchat-mobile"]=this["webpackJsonpchat-mobile"]||[]).push([[0],{23:function(e,a,t){e.exports=t(38)},28:function(e,a,t){},29:function(e,a,t){},38:function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),s=t(9),r=t.n(s),i=(t(28),t(29),t(2)),l=t(10),o=t(4),u=t(17);o.b.add(u.a);var m=function(){var e=Object(i.c)((function(e){return e.items})),a=Object(i.c)((function(e){return e.loading})),t=Object(i.b)(),n=Object(i.c)((function(e){return e.openChat})),s=Object(i.c)((function(e){return e.chats})),r=Object(i.c)((function(e){return e.chatLoading}));return c.a.createElement("div",{className:"header"},c.a.createElement("div",{className:"main"},c.a.createElement("div",{className:"header_info"},c.a.createElement("div",{className:"avatar",style:{backgroundImage:"url("+(!0===n?s.picture:e.picture)+")"}}),c.a.createElement("div",{className:"text_block"},c.a.createElement("div",{className:"text"},n?c.a.createElement(c.a.Fragment,null,r?"name":s.name,c.a.createElement("div",{className:s.online?"online":"offline"})):c.a.createElement(c.a.Fragment,null,"\u0427\u0430\u0442\u044b (",a?"00":e.friends.length,") "))),c.a.createElement("div",{className:!0===n?"icon_translate click":"icon click",onClick:function(){t({type:"hide_chat"})}},c.a.createElement(l.a,{icon:"plus"})))))},d=t(22),f=t(18);o.b.add(f.faPaperPlane);var g=function(){var e=Object(i.b)(),a=Object(n.useState)(""),t=Object(d.a)(a,2),s=t[0],r=t[1],o=Object(i.c)((function(e){return e.adding}));return c.a.createElement("div",{className:"form_main"},c.a.createElement("div",{className:"message_form"},c.a.createElement("input",{placeholder:o?"loading...":"Enter your message...",onChange:function(e){r(e.target.value)},value:s})),c.a.createElement("button",{className:0===s.length?"btn_send_dis":"btn_send click",disabled:0===s.length,onClick:function(){e(function(e){return function(a){a({type:"adding"}),fetch("https://intocode.ru/chat.php",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({message:e})}).then((function(e){return e.json()})).then((function(e){return a({type:"adding_success",payload:e})}))}}(s)),r("")}},c.a.createElement(l.a,{icon:"paper-plane"})))};var b=function(){var e=Object(n.useRef)(null),a=Object(i.c)((function(e){return e.chatLoading})),t=Object(i.c)((function(e){return e.messages})),s=Object(i.c)((function(e){return e.adding}));return Object(n.useEffect)((function(){!1===s&&(e.current.scrollTop=e.current.scrollHeight)})),c.a.createElement("div",{className:"chat_main",ref:e},a?c.a.createElement("div",{className:"loader"}):0===t.length?c.a.createElement("div",{className:"message_block"},"\u041d\u0435\u0442 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439"):t.map((function(e){return c.a.createElement("div",{key:e.message_id,className:(a=e.side,"left"===a?"message_block":"right"===a?"my_message_block":void 0)},e.text,c.a.createElement("span",{className:"date_mess"},e.timestamp));var a})),c.a.createElement(g,null))};var p=function(){var e=Object(i.c)((function(e){return e.items})),a=Object(i.c)((function(e){return e.loading})),t=Object(i.b)();return Object(n.useEffect)((function(){t((function(e){e({type:"loading"}),fetch("https://intocode.ru/chat.php").then((function(e){return e.json()})).then((function(a){return e({type:"loading_success",payload:a})}))}))}),[t]),c.a.createElement("div",{className:"contacts_block"},a?c.a.createElement("div",{className:"loader"}):e.friends.map((function(e){return c.a.createElement("div",{key:e.id,className:"contact click",onClick:function(){return t((a=e.id,function(e){e({type:"loading_messages"}),fetch("https://intocode.ru/chat.php?action=friends&id=".concat(a)).then((function(e){return e.json()})).then((function(a){return e({type:"loading_mess_success",payload:a})}))}));var a}},c.a.createElement("div",null,c.a.createElement("div",{className:"avatar m-right",style:{backgroundImage:"url("+e.picture+")"}})),c.a.createElement("div",{className:"info_mess"},c.a.createElement("div",{className:"name"},e.name),c.a.createElement("div",{className:"message"},e.lastChat)),c.a.createElement("div",{className:"date"},e.latest_timestamp))})))};var h=function(){var e=Object(i.c)((function(e){return e.openChat}));return c.a.createElement("div",{className:"App"},c.a.createElement("div",{className:"main_block"},c.a.createElement(m,null),e?c.a.createElement(b,null):c.a.createElement(p,null)))},v=(t(37),t(7)),j=t(5),E=t(3),O={loading:!0,items:[],chats:[],messages:[],openChat:!1,chatLoading:!0,adding:!1};var _=t(19),N=t(21),y=Object(N.a)({collapsed:!0,diff:!0}),k=Object(v.c)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:O,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"loading":return Object(E.a)(Object(E.a)({},e),{},{loading:!0});case"loading_success":return Object(E.a)(Object(E.a)({},e),{},{items:a.payload,loading:!1});case"loading_messages":return Object(E.a)(Object(E.a)({},e),{},{chatLoading:!0,openChat:!0});case"loading_mess_success":return Object(E.a)(Object(E.a)({},e),{},{chats:a.payload,messages:a.payload.chatlog,chatLoading:!1});case"hide_chat":return Object(E.a)(Object(E.a)({},e),{},{openChat:!1});case"adding":return Object(E.a)(Object(E.a)({},e),{},{adding:!0});case"adding_success":return Object(E.a)(Object(E.a)({},e),{},{messages:[].concat(Object(j.a)(e.messages),[a.payload]),adding:!1});default:return e}}),Object(v.a)(_.a,y));r.a.render(c.a.createElement(c.a.StrictMode,null,c.a.createElement(i.a,{store:k},c.a.createElement(h,null))),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.07994b81.chunk.js.map